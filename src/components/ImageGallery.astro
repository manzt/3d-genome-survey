---
import { load } from "../loader.ts";

let figures = await load();
---
<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 p-2">
  {figures.slice(0, 100).map((figure) => {
    const {title, authors, year } = figure.source;
    return (
      <div class="gallery-item border border-gray-200 rounded-lg overflow-hidden bg-white shadow-sm hover:shadow-md transition-shadow p-2">
        <div class="flex items-center justify-between mb-1">
          <span class="text-xs font-semibold text-gray-500">{year}</span>
          <span class="text-xs italic text-gray-600 truncate max-w-[70%]">{authors}</span>
        </div>
        <h3 class="text-xs font-medium mb-2 line-clamp-3">{title}</h3>
        <ul class="flex flex-wrap gap-0.5">
          {figure.codes.map((code) => (
            <li class="code-pill bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-full text-[10px]">{code}</li>
          ))}
        </ul>
      </div>
    );
  })}
</div>
